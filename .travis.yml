language: cpp
os: linux
dist: bionic

jobs:
  include:
    - os: linux
      compiler: gcc
      addons:
        apt:
          packages:
            #- &precise_latest_boost_packages #Boost binary package, needs testing
            - g++-10
            - cmake
          sources:
            #- &precise_latest_boost_sources #Boost sources, needs testing
            - ubuntu-toolchain-r-test #repo with g++ packages
            - sourceline: 'deb https://apt.kitware.com/ubuntu/ bionic main'
              key_url: 'https://apt.kitware.com/keys/kitware-archive-latest.asc'

script:
  ############################################################################
  # Build main and tests
  ############################################################################
  - CXX=/usr/bin/g++-10
  - CC=/usr/bin/gcc-10
  - mkdir -p build
  - cd build
  - cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTING=ON -DBUILD_EXAMPLES=OFF ..
  - cmake --build .
  - ./tests/all_basic_tests